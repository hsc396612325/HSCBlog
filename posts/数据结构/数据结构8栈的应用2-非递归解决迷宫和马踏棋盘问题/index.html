<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>数据结构8————栈的应用2-非递归解决迷宫和马踏棋盘问题 | 冰炭不投day的博客</title>
    <meta property="og:title" content="数据结构8————栈的应用2-非递归解决迷宫和马踏棋盘问题 - 冰炭不投day的博客">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2018-05-08T22:40:54&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2018-05-08T22:40:54&#43;08:00'>
        
    <meta name="Keywords" content="Android 冰炭不投day">
    <meta name="description" content="数据结构8————栈的应用2-非递归解决迷宫和马踏棋盘问题">
        
    <meta name="author" content="冰炭不投day">
    <meta property="og:url" content="http://blog.bingtan.online/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%848%E6%A0%88%E7%9A%84%E5%BA%94%E7%94%A82-%E9%9D%9E%E9%80%92%E5%BD%92%E8%A7%A3%E5%86%B3%E8%BF%B7%E5%AE%AB%E5%92%8C%E9%A9%AC%E8%B8%8F%E6%A3%8B%E7%9B%98%E9%97%AE%E9%A2%98/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-4031353640611810",
        enable_page_level_ads: true
    });
    </script>
    


    
    
        <link rel="stylesheet" href='/css/douban.css'>
    
        <link rel="stylesheet" href='/css/other.css'>
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="http://blog.bingtan.online">
                        冰炭不投day的博客
                    </a>
                
                <p class="description">若向往 我敢往</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="http://blog.bingtan.online">首页</a>
                    
                    <a  href="http://blog.bingtan.online/tools/" title="工具">工具</a>
                    
                    <a  href="http://blog.bingtan.online/archives/" title="归档">归档</a>
                    
                    <a  href="http://blog.bingtan.online/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">数据结构8————栈的应用2-非递归解决迷宫和马踏棋盘问题</h1>
        </header>
        <date class="post-meta meta-date">
            2018年5月8日
        </date>
        
        <div class="post-meta">
            <span>|</span>
            
            <span class="meta-category"><a href='http://blog.bingtan.online/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84'>“数据结构&#34;</a></span>
            
        </div>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        

        
        
        <div class="post-content">
            <h3 id="一前言">一.前言</h3>
<h4 id="1-迷宫问题的描述">1. 迷宫问题的描述</h4>
<p>在高为H，宽为W的地图中，0代表可以走，1代表障碍物，不重复的走到终点。给定地图和终点求下列问题</p>
<ul>
<li>子问题1 按照右下左上（优先级）输出一条到达终点路径</li>
<li>子问题2 输出所有路径</li>
</ul>
<h4 id="2-马踏棋盘问题的描述">2. 马踏棋盘问题的描述</h4>
<p>将马放在国际象棋8×8棋盘某个方格中，马按走棋规则进行移动，要求每个方格只进入一次，走遍棋盘上全部64个方格。编制程序，求出马的行走路线，并按求出的行走路线将数字1,2，…，64依次填入一个8×8的方阵并输出。</p>
<ul>
<li>子问题1 按照顺时针的（优先级）输出一条踏完所有方格的路径(深搜)</li>
<li>子问题2 输出一条踏完所有方格的的路径（贪心）</li>
<li>子问题3 输出所有走法（深搜）</li>
<li>子问题4 输出指定数量的走法(贪心)</li>
</ul>
<h4 id="3使用的算法">3.使用的算法</h4>
<ul>
<li>数据结构：栈</li>
<li>算法：深度优先搜索,贪心优化</li>
</ul>
<h4 id="4其他">4.其他</h4>
<ul>
<li>所有贴出的代码，只贴了核心部分，其他部分(头文件.栈的运算)都没有贴出来</li>
<li>完整代码可在文末的git中下载。</li>
</ul>
<h3 id="二迷宫-子问题1">二.迷宫 子问题1</h3>
<h4 id="1思路">1.思路</h4>
<ul>
<li>总思路：按着k=0~4四个方向依次试探，将可走的点入栈，入栈后继续试探新的点的四个方向，当4个方向都不可走时出栈（回溯），出栈后接着出栈前的方向继续试探（防止重复）</li>
<li>四个方向的试探顺序：右下左上。</li>
<li>e1代表当前决定是否要入栈的元素（待入栈），e1的结构体组成(e1坐标+e1到e2的方向k)</li>
<li>e2代表e1本次试探方向的棋盘坐标</li>
<li>e1入栈的时机
<ul>
<li>如果存在一个方向使e2既未出界也没用被走过，那么入栈e1</li>
<li>此时原e2变成了新的e1(待入栈)，然后试探此时e1的0~4四个方向的e2。</li>
<li>步数+1，标记已走</li>
</ul>
</li>
<li>出栈的时机(回溯)
<ul>
<li>如果e1的四个方向都无法走，那么将栈内元素出栈</li>
<li>此时出栈的元素变成了新e1(待入栈)，然后继续接着入栈前的方向试探(不是从0方向开始)；</li>
<li>步数-1，取消标记</li>
</ul>
</li>
<li>循环的终止条件
<ul>
<li>如果此时e1==终点坐标，结束循环，输出路径</li>
</ul>
</li>
</ul>
<h4 id="2难点">2.难点</h4>
<ul>
<li>入栈的时机</li>
<li>出栈的时机</li>
<li>回溯时接着入栈前的方向继续试探(实现方法：e1元素内保存e1-&gt;e2的方向回溯后，e1接着原方向继续试探)。</li>
</ul>
<h4 id="3代码">3.代码</h4>
<p><strong>数据结构定义和预定义的数据</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#999;font-weight:bold;font-style:italic">#</span><span style="color:#999;font-weight:bold;font-style:italic">define MAXSIZE 20</span><span style="color:#999;font-weight:bold;font-style:italic">
</span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#999;font-weight:bold;font-style:italic">#</span><span style="color:#999;font-weight:bold;font-style:italic">define TRUE 1</span><span style="color:#999;font-weight:bold;font-style:italic">
</span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#999;font-weight:bold;font-style:italic">#</span><span style="color:#999;font-weight:bold;font-style:italic">define FALSE 0 </span><span style="color:#999;font-weight:bold;font-style:italic">
</span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#999;font-weight:bold;font-style:italic">#</span><span style="color:#999;font-weight:bold;font-style:italic">define W 4 </span><span style="color:#998;font-style:italic">//迷宫的高和宽 
</span><span style="color:#998;font-style:italic"></span><span style="color:#999;font-weight:bold;font-style:italic">#</span><span style="color:#999;font-weight:bold;font-style:italic">define H 5 </span><span style="color:#999;font-weight:bold;font-style:italic">
</span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#000;font-weight:bold">typedef</span> <span style="color:#000;font-weight:bold">struct</span>{<span style="color:#998;font-style:italic">//栈内要存的元素
</span><span style="color:#998;font-style:italic"></span>	<span style="color:#458;font-weight:bold">int</span> x;
	<span style="color:#458;font-weight:bold">int</span> y;
	<span style="color:#458;font-weight:bold">int</span> direction;
} Elemtype;

SeqStack <span style="color:#000;font-weight:bold">*</span>SS;<span style="color:#998;font-style:italic">//栈
</span><span style="color:#998;font-style:italic"></span><span style="color:#458;font-weight:bold">int</span> book[H][W];<span style="color:#998;font-style:italic">//标记数组
</span><span style="color:#998;font-style:italic"></span><span style="color:#458;font-weight:bold">int</span> n<span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>,m<span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>;<span style="color:#998;font-style:italic">//终点坐标 
</span><span style="color:#998;font-style:italic"></span><span style="color:#458;font-weight:bold">int</span> a[H][W]<span style="color:#000;font-weight:bold">=</span>{{<span style="color:#099">0</span>,<span style="color:#099">0</span>,<span style="color:#099">1</span>,<span style="color:#099">0</span>}, <span style="color:#998;font-style:italic">//地图 
</span><span style="color:#998;font-style:italic"></span>			 {<span style="color:#099">0</span>,<span style="color:#099">0</span>,<span style="color:#099">0</span>,<span style="color:#099">0</span>},
		         {<span style="color:#099">0</span>,<span style="color:#099">0</span>,<span style="color:#099">1</span>,<span style="color:#099">1</span>},
			 {<span style="color:#099">0</span>,<span style="color:#099">1</span>,<span style="color:#099">0</span>,<span style="color:#099">0</span>},
			 {<span style="color:#099">0</span>,<span style="color:#099">0</span>,<span style="color:#099">0</span>,<span style="color:#099">0</span>}};
</code></pre></td></tr></table>
</div>
</div><p><strong>核心代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">dfs</span>(Elemtype e){
	<span style="color:#458;font-weight:bold">int</span> k;
	<span style="color:#458;font-weight:bold">int</span> next[<span style="color:#099">4</span>][<span style="color:#099">2</span>]<span style="color:#000;font-weight:bold">=</span>{{<span style="color:#099">0</span>,<span style="color:#099">1</span>},<span style="color:#998;font-style:italic">//右 
</span><span style="color:#998;font-style:italic"></span>	                {<span style="color:#099">1</span>,<span style="color:#099">0</span>},<span style="color:#998;font-style:italic">//下 
</span><span style="color:#998;font-style:italic"></span>			{<span style="color:#099">0</span>,<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>},<span style="color:#998;font-style:italic">//左 
</span><span style="color:#998;font-style:italic"></span>	                {<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>,<span style="color:#099">0</span>}};<span style="color:#998;font-style:italic">//上
</span><span style="color:#998;font-style:italic"></span>	Elemtype e1,e2;    <span style="color:#998;font-style:italic">//e1：待入栈，e2：e1的试探方向的坐标 
</span><span style="color:#998;font-style:italic"></span>	e1 <span style="color:#000;font-weight:bold">=</span> e;
	e1.direction<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
	<span style="color:#000;font-weight:bold">while</span>(e1.x<span style="color:#000;font-weight:bold">!</span><span style="color:#000;font-weight:bold">=</span>n<span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e1.y<span style="color:#000;font-weight:bold">!</span><span style="color:#000;font-weight:bold">=</span>m){ <span style="color:#998;font-style:italic">// m n终点坐标 
</span><span style="color:#998;font-style:italic"></span>			
		<span style="color:#000;font-weight:bold">for</span>(k<span style="color:#000;font-weight:bold">=</span>e1.direction;k<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">4</span>;k<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>){
			
			e2.x<span style="color:#000;font-weight:bold">=</span>e1.x<span style="color:#000;font-weight:bold">+</span>next[k][<span style="color:#099">0</span>];<span style="color:#998;font-style:italic">//下一步 
</span><span style="color:#998;font-style:italic"></span>			e2.y<span style="color:#000;font-weight:bold">=</span>e1.y<span style="color:#000;font-weight:bold">+</span>next[k][<span style="color:#099">1</span>];
			e1.direction<span style="color:#000;font-weight:bold">=</span>k;
			<span style="color:#000;font-weight:bold">if</span>(e2.x<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">0</span><span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e2.y<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">0</span><span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e2.y<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#000;font-weight:bold">=</span>W<span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e2.x<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#000;font-weight:bold">=</span>H)<span style="color:#998;font-style:italic">//判断是否越界 
</span><span style="color:#998;font-style:italic"></span>				<span style="color:#000;font-weight:bold">continue</span>;
				
			<span style="color:#000;font-weight:bold">if</span>(a[e2.x][e2.y]<span style="color:#000;font-weight:bold">!</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span><span style="color:#000;font-weight:bold">&amp;</span><span style="color:#000;font-weight:bold">&amp;</span>book[e2.x][e2.y]<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>)<span style="color:#998;font-style:italic">//判断下一步是否被走过和是否有障碍物
</span><span style="color:#998;font-style:italic"></span>			{
				Push(SS,e1);
				book[e1.x][e1.y]<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>;<span style="color:#998;font-style:italic">//标记
</span><span style="color:#998;font-style:italic"></span>				e1<span style="color:#000;font-weight:bold">=</span>e2; 
				e1.direction<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
				<span style="color:#998;font-style:italic">//printf(&#34;入(%d,%d)%d\n&#34;,e1.x,e1.y,e1.direction);
</span><span style="color:#998;font-style:italic"></span>				<span style="color:#000;font-weight:bold">break</span>;				
			} 
		}
		
		<span style="color:#000;font-weight:bold">if</span>(k<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>){
			Pop(SS,<span style="color:#000;font-weight:bold">&amp;</span>e1); 
			book[e1.x][e1.y]<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
			<span style="color:#998;font-style:italic">//printf(&#34;出(%d,%d)%d\n&#34;,e1.x,e1.y,e1.direction); 
</span><span style="color:#998;font-style:italic"></span>			e1.direction<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>;
		}
	}
	
	Push(SS,e1);
	book[e1.x][e1.y]<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>;
	
	<span style="color:#458;font-weight:bold">int</span> i;
	<span style="color:#000;font-weight:bold">if</span>(e1.x<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span>n<span style="color:#000;font-weight:bold">&amp;</span><span style="color:#000;font-weight:bold">&amp;</span>e1.y<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span>m){
		<span style="color:#000;font-weight:bold">for</span>(i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;i<span style="color:#000;font-weight:bold">&lt;</span>SS<span style="color:#000;font-weight:bold">-</span><span style="color:#000;font-weight:bold">&gt;</span>top<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>;i<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>){
			printf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">过程(%d,%d)方向:%d</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>,SS<span style="color:#000;font-weight:bold">-</span><span style="color:#000;font-weight:bold">&gt;</span>data[i].x,SS<span style="color:#000;font-weight:bold">-</span><span style="color:#000;font-weight:bold">&gt;</span>data[i].y,SS<span style="color:#000;font-weight:bold">-</span><span style="color:#000;font-weight:bold">&gt;</span>data[i].direction); 
		}
	}
}
<span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">main</span>(<span style="color:#458;font-weight:bold">void</span>)
{
	Elemtype e;
	SS<span style="color:#000;font-weight:bold">=</span>InitStack();
	e.x<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
	e.y<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
	e.direction<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
	book[<span style="color:#099">0</span>][<span style="color:#099">0</span>]<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>;<span style="color:#998;font-style:italic">//标记起始点
</span><span style="color:#998;font-style:italic"></span>	dfs(e);<span style="color:#998;font-style:italic">//第一个参数是起始点的x坐标，第二个参数是起始点的y坐标，第三个参数是步数 
</span><span style="color:#998;font-style:italic"></span>}

</code></pre></td></tr></table>
</div>
</div><h4 id="4运行结果">4.运行结果</h4>
<p><img src="/image/Data_structure/22_0.png" alt="这里写图片描述"></p>
<h3 id="三迷宫-子问题2">三.迷宫 子问题2</h3>
<h4 id="1思路-1">1.思路</h4>
<ul>
<li>基本思路和子问题1差不多</li>
<li>区别在于:
<ul>
<li>终止条件变为当前栈为空栈</li>
<li>当到达终点时，先入栈一次，输出结果，然后出栈两次。</li>
</ul>
</li>
</ul>
<h4 id="2代码">2.代码</h4>
<p><strong>数据结构定义和预定义的数据</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#999;font-weight:bold;font-style:italic">#</span><span style="color:#999;font-weight:bold;font-style:italic">define MAXSIZE 20</span><span style="color:#999;font-weight:bold;font-style:italic">
</span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#999;font-weight:bold;font-style:italic">#</span><span style="color:#999;font-weight:bold;font-style:italic">define TRUE 1</span><span style="color:#999;font-weight:bold;font-style:italic">
</span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#999;font-weight:bold;font-style:italic">#</span><span style="color:#999;font-weight:bold;font-style:italic">define FALSE 0 </span><span style="color:#999;font-weight:bold;font-style:italic">
</span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#999;font-weight:bold;font-style:italic">#</span><span style="color:#999;font-weight:bold;font-style:italic">define W 4</span><span style="color:#999;font-weight:bold;font-style:italic">
</span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#999;font-weight:bold;font-style:italic">#</span><span style="color:#999;font-weight:bold;font-style:italic">define H 5</span><span style="color:#999;font-weight:bold;font-style:italic">
</span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#000;font-weight:bold">typedef</span> <span style="color:#000;font-weight:bold">struct</span>{
	<span style="color:#458;font-weight:bold">int</span> x;
	<span style="color:#458;font-weight:bold">int</span> y;
	<span style="color:#458;font-weight:bold">int</span> direction;
} Elemtype;

SeqStack <span style="color:#000;font-weight:bold">*</span>SS;
<span style="color:#458;font-weight:bold">int</span> book[H][W];
<span style="color:#458;font-weight:bold">int</span> a[H][W]<span style="color:#000;font-weight:bold">=</span>{{<span style="color:#099">0</span>,<span style="color:#099">0</span>,<span style="color:#099">1</span>,<span style="color:#099">0</span>},
             {<span style="color:#099">0</span>,<span style="color:#099">0</span>,<span style="color:#099">0</span>,<span style="color:#099">0</span>},
             {<span style="color:#099">0</span>,<span style="color:#099">0</span>,<span style="color:#099">1</span>,<span style="color:#099">1</span>},
	     {<span style="color:#099">0</span>,<span style="color:#099">1</span>,<span style="color:#099">0</span>,<span style="color:#099">0</span>},
	     {<span style="color:#099">0</span>,<span style="color:#099">0</span>,<span style="color:#099">0</span>,<span style="color:#099">1</span>}};
<span style="color:#458;font-weight:bold">int</span> n<span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>,m<span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>;<span style="color:#998;font-style:italic">//终点坐标 
</span></code></pre></td></tr></table>
</div>
</div><p><strong>核心代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">dfs</span>(Elemtype e){
	<span style="color:#458;font-weight:bold">int</span> k;
	<span style="color:#458;font-weight:bold">int</span> next[<span style="color:#099">4</span>][<span style="color:#099">2</span>]<span style="color:#000;font-weight:bold">=</span>{{<span style="color:#099">0</span>,<span style="color:#099">1</span>},<span style="color:#998;font-style:italic">//右 
</span><span style="color:#998;font-style:italic"></span>	                {<span style="color:#099">1</span>,<span style="color:#099">0</span>},<span style="color:#998;font-style:italic">//下 
</span><span style="color:#998;font-style:italic"></span>			        {<span style="color:#099">0</span>,<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>},<span style="color:#998;font-style:italic">//左 
</span><span style="color:#998;font-style:italic"></span>	                {<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>,<span style="color:#099">0</span>}};<span style="color:#998;font-style:italic">//上
</span><span style="color:#998;font-style:italic"></span>	Elemtype e1,e2;
	e1 <span style="color:#000;font-weight:bold">=</span> e;
	e1.direction<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
	<span style="color:#000;font-weight:bold">do</span>{	
			
		<span style="color:#000;font-weight:bold">for</span>(k<span style="color:#000;font-weight:bold">=</span>e1.direction;k<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">4</span>;k<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>){
			
			e2.x<span style="color:#000;font-weight:bold">=</span>e1.x<span style="color:#000;font-weight:bold">+</span>next[k][<span style="color:#099">0</span>];<span style="color:#998;font-style:italic">//下一步 
</span><span style="color:#998;font-style:italic"></span>			e2.y<span style="color:#000;font-weight:bold">=</span>e1.y<span style="color:#000;font-weight:bold">+</span>next[k][<span style="color:#099">1</span>];
			e1.direction<span style="color:#000;font-weight:bold">=</span>k;
			
			<span style="color:#000;font-weight:bold">if</span>(e2.x<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">0</span><span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e2.y<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">0</span><span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e2.y<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#000;font-weight:bold">=</span>W<span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e2.x<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#000;font-weight:bold">=</span>H)<span style="color:#998;font-style:italic">//判断是否越界 
</span><span style="color:#998;font-style:italic"></span>				<span style="color:#000;font-weight:bold">continue</span>;
				
			<span style="color:#000;font-weight:bold">if</span>(a[e2.x][e2.y]<span style="color:#000;font-weight:bold">!</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span><span style="color:#000;font-weight:bold">&amp;</span><span style="color:#000;font-weight:bold">&amp;</span>book[e2.x][e2.y]<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>)<span style="color:#998;font-style:italic">//判断下一步是否被走过和是否有障碍物
</span><span style="color:#998;font-style:italic"></span>			{
				<span style="color:#998;font-style:italic">//入栈 
</span><span style="color:#998;font-style:italic"></span>				Push(SS,e1);
				book[e1.x][e1.y]<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>;<span style="color:#998;font-style:italic">//标记
</span><span style="color:#998;font-style:italic"></span>				e1<span style="color:#000;font-weight:bold">=</span>e2; 
				e1.direction<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
				<span style="color:#998;font-style:italic">//printf(&#34;入(%d,%d)%d\n&#34;,e1.x,e1.y,e1.direction);
</span><span style="color:#998;font-style:italic"></span>				<span style="color:#000;font-weight:bold">break</span>;				
			} 
			
		}
		
		<span style="color:#458;font-weight:bold">int</span> i;
		<span style="color:#998;font-style:italic">//到达终点 
</span><span style="color:#998;font-style:italic"></span>		<span style="color:#000;font-weight:bold">if</span>(e1.x<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span>n<span style="color:#000;font-weight:bold">&amp;</span><span style="color:#000;font-weight:bold">&amp;</span>e1.y<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span>m){
			Push(SS,e1);
			book[e1.x][e1.y]<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>;
			
			<span style="color:#000;font-weight:bold">for</span>(i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;i<span style="color:#000;font-weight:bold">&lt;</span>SS<span style="color:#000;font-weight:bold">-</span><span style="color:#000;font-weight:bold">&gt;</span>top<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>;i<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>){
				printf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">过程(%d,%d)方向:%d</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>,SS<span style="color:#000;font-weight:bold">-</span><span style="color:#000;font-weight:bold">&gt;</span>data[i].x,SS<span style="color:#000;font-weight:bold">-</span><span style="color:#000;font-weight:bold">&gt;</span>data[i].y,SS<span style="color:#000;font-weight:bold">-</span><span style="color:#000;font-weight:bold">&gt;</span>data[i].direction); 
			}
			printf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">\n</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>);
			Pop(SS,<span style="color:#000;font-weight:bold">&amp;</span>e1);
			book[e1.x][e1.y]<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
		}
		
		<span style="color:#000;font-weight:bold">if</span>(k<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span><span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e1.x<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span>n<span style="color:#000;font-weight:bold">&amp;</span><span style="color:#000;font-weight:bold">&amp;</span>e1.y<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span>m){
			<span style="color:#998;font-style:italic">//出栈 
</span><span style="color:#998;font-style:italic"></span>			Pop(SS,<span style="color:#000;font-weight:bold">&amp;</span>e1);
			book[e1.x][e1.y]<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
			<span style="color:#998;font-style:italic">//printf(&#34;出(%d,%d)%d\n&#34;,e1.x,e1.y,e1.direction); 
</span><span style="color:#998;font-style:italic"></span>			e1.direction<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>;
		}
	}<span style="color:#000;font-weight:bold">while</span>(<span style="color:#000;font-weight:bold">!</span>StackEmpty(SS)<span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e1.direction<span style="color:#000;font-weight:bold">!</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>);
	
}
<span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">main</span>(<span style="color:#458;font-weight:bold">void</span>)
{
	Elemtype e;
	SS<span style="color:#000;font-weight:bold">=</span>InitStack();
	e.x<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;<span style="color:#998;font-style:italic">//起点 
</span><span style="color:#998;font-style:italic"></span>	e.y<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
	e.direction<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
	book[<span style="color:#099">0</span>][<span style="color:#099">0</span>]<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>;<span style="color:#998;font-style:italic">//标记起始点
</span><span style="color:#998;font-style:italic"></span>	dfs(e);<span style="color:#998;font-style:italic">//第一个参数是起始点的x坐标，第二个参数是起始点的y坐标，第三个参数是步数 
</span><span style="color:#998;font-style:italic"></span>}

</code></pre></td></tr></table>
</div>
</div><h4 id="3运行结果">3.运行结果</h4>
<p><img src="/image/Data_structure/22_1.png" alt="这里写图片描述"></p>
<h3 id="四马踏棋盘-子问题1">四.马踏棋盘 子问题1</h3>
<h4 id="1思路-2">1.思路</h4>
<ul>
<li>总思路：按着k=0~7八个方向依次试探，将可走的点入栈，入栈后继续试探新的点的四个方向，当8个方向都不可走时出栈（回溯），出栈后接着出栈前的方向继续试探（防止重复）</li>
<li>八个方向的试探顺序：从右上开始，依次顺时针遍历。</li>
<li>和迷宫子问题1思路很像</li>
<li>e1代表当前决定是否要入栈的元素（待入栈），e1的结构体组成(e1坐标+e1到e2的方向k)</li>
<li>e2代表e1本次试探方向的棋盘坐标</li>
<li>e1入栈的时机
<ul>
<li>如果存在一个方向使e2既未出界也没用被走过，那么入栈e1</li>
<li>此时原e2变成了新的e1(待入栈)，然后试探此时e1的0~7八个方向的e2。</li>
<li>步数+1，标记已走</li>
</ul>
</li>
<li>出栈的时机(回溯)
<ul>
<li>如果e1的八个方向都无法走，那么将栈内元素出栈</li>
<li>此时出栈的元素变成了新e1(待入栈)，然后继续接着入栈前的方向试探(不是从0方向开始)；</li>
<li>步数-1，取消标记</li>
</ul>
</li>
<li>循环的终止条件
<ul>
<li>如果此时马的步数==64，结束循环，输出路径</li>
</ul>
</li>
</ul>
<h4 id="2代码-1">2.代码</h4>
<p><strong>数据结构定义和预定义的数据</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#999;font-weight:bold;font-style:italic">#</span><span style="color:#999;font-weight:bold;font-style:italic">define MAXSIZE 100</span><span style="color:#999;font-weight:bold;font-style:italic">
</span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#999;font-weight:bold;font-style:italic">#</span><span style="color:#999;font-weight:bold;font-style:italic">define TRUE 1</span><span style="color:#999;font-weight:bold;font-style:italic">
</span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#999;font-weight:bold;font-style:italic">#</span><span style="color:#999;font-weight:bold;font-style:italic">define FALSE 0 </span><span style="color:#999;font-weight:bold;font-style:italic">
</span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#999;font-weight:bold;font-style:italic">#</span><span style="color:#999;font-weight:bold;font-style:italic">define H 8</span><span style="color:#999;font-weight:bold;font-style:italic">
</span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#999;font-weight:bold;font-style:italic">#</span><span style="color:#999;font-weight:bold;font-style:italic">define W 8 </span><span style="color:#999;font-weight:bold;font-style:italic">
</span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#000;font-weight:bold">typedef</span> <span style="color:#000;font-weight:bold">struct</span>{
	<span style="color:#458;font-weight:bold">int</span> x;
	<span style="color:#458;font-weight:bold">int</span> y;
	<span style="color:#458;font-weight:bold">int</span> direction;
} Elemtype;

<span style="color:#458;font-weight:bold">int</span> book[W][H] <span style="color:#000;font-weight:bold">=</span>{<span style="color:#099">0</span>};<span style="color:#998;font-style:italic">//标记
</span><span style="color:#998;font-style:italic"></span><span style="color:#458;font-weight:bold">int</span> next[<span style="color:#099">8</span>][<span style="color:#099">2</span>]<span style="color:#000;font-weight:bold">=</span>{{<span style="color:#000;font-weight:bold">-</span><span style="color:#099">2</span>,<span style="color:#099">1</span>}, <span style="color:#998;font-style:italic">//下一步走法 
</span><span style="color:#998;font-style:italic"></span>		{<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>,<span style="color:#099">2</span>}, 
		{<span style="color:#099">1</span>,<span style="color:#099">2</span>},
	        {<span style="color:#099">2</span>,<span style="color:#099">1</span>}, 
		{<span style="color:#099">2</span>,<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>},
		{<span style="color:#099">1</span>,<span style="color:#000;font-weight:bold">-</span><span style="color:#099">2</span>}, 
		{<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>,<span style="color:#000;font-weight:bold">-</span><span style="color:#099">2</span>},
	        {<span style="color:#000;font-weight:bold">-</span><span style="color:#099">2</span>,<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>}};          
</code></pre></td></tr></table>
</div>
</div><p><strong>核心代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">dfs</span>(Elemtype e){

	 <span style="color:#458;font-weight:bold">int</span> k,step<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>;
	 Elemtype e1<span style="color:#000;font-weight:bold">=</span>e,e2;<span style="color:#998;font-style:italic">//e1：待入栈元素。e2：e1试探方向的元素 
</span><span style="color:#998;font-style:italic"></span>	 e1.direction<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
	 
	<span style="color:#000;font-weight:bold">while</span>(step<span style="color:#000;font-weight:bold">!</span><span style="color:#000;font-weight:bold">=</span>W<span style="color:#000;font-weight:bold">*</span>H){
			
		<span style="color:#000;font-weight:bold">for</span>(k<span style="color:#000;font-weight:bold">=</span>e1.direction;k<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">8</span>;k<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>){ <span style="color:#998;font-style:italic">//如果上一步是入栈，则e1.direction=0，如果上一步是出栈则e1.direction++ 
</span><span style="color:#998;font-style:italic"></span>			
			e2.x<span style="color:#000;font-weight:bold">=</span>e1.x<span style="color:#000;font-weight:bold">+</span>next[k][<span style="color:#099">0</span>];
			e2.y<span style="color:#000;font-weight:bold">=</span>e1.y<span style="color:#000;font-weight:bold">+</span>next[k][<span style="color:#099">1</span>];
			e1.direction <span style="color:#000;font-weight:bold">=</span> k;<span style="color:#998;font-style:italic">//e1到e2的走法 
</span><span style="color:#998;font-style:italic"></span>			
			<span style="color:#000;font-weight:bold">if</span>(e2.x<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">0</span><span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e2.x<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#000;font-weight:bold">=</span>H<span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e2.y<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">0</span><span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e2.y<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#000;font-weight:bold">=</span>W)
				<span style="color:#000;font-weight:bold">continue</span>;
		
			<span style="color:#000;font-weight:bold">if</span>(book[e2.x][e2.y]<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>){
				book[e1.x][e1.y]<span style="color:#000;font-weight:bold">=</span>step;
				Push(SS,e1);<span style="color:#998;font-style:italic">//入栈e1 
</span><span style="color:#998;font-style:italic"></span>				
				e1 <span style="color:#000;font-weight:bold">=</span> e2; <span style="color:#998;font-style:italic">//原e2变成e1(待入栈) 
</span><span style="color:#998;font-style:italic"></span>				e1.direction<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;<span style="color:#998;font-style:italic">//下次试探从0开始 
</span><span style="color:#998;font-style:italic"></span>				step<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>;
				<span style="color:#000;font-weight:bold">break</span>;
			}
		}
		<span style="color:#000;font-weight:bold">if</span>(k<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">8</span>){
			Pop(SS,<span style="color:#000;font-weight:bold">&amp;</span>e1);<span style="color:#998;font-style:italic">//出栈栈顶元素，栈顶元素称为新的e1(待入栈) 
</span><span style="color:#998;font-style:italic"></span>			
		 	book[e1.x][e1.y]<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>; 
			step<span style="color:#000;font-weight:bold">-</span><span style="color:#000;font-weight:bold">-</span>;
			e1.direction<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>;<span style="color:#998;font-style:italic">//下次试探接着入栈键的方向 
</span><span style="color:#998;font-style:italic"></span>		}			
	}
	
	<span style="color:#998;font-style:italic">//标记终点元素 
</span><span style="color:#998;font-style:italic"></span>	book[e1.x][e1.y]<span style="color:#000;font-weight:bold">=</span>step;
	
	<span style="color:#458;font-weight:bold">int</span> i,j;
	<span style="color:#000;font-weight:bold">if</span>(step<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span>W<span style="color:#000;font-weight:bold">*</span>H){<span style="color:#998;font-style:italic">//打印 
</span><span style="color:#998;font-style:italic"></span>		<span style="color:#000;font-weight:bold">for</span>(i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;i<span style="color:#000;font-weight:bold">&lt;</span>H;i<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>){ 
			<span style="color:#000;font-weight:bold">for</span>(j<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;j<span style="color:#000;font-weight:bold">&lt;</span>W;j<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>)
				printf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">%4d</span><span style="color:#d14">&#34;</span>,book[i][j]);
		 	printf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>);
		} 	
	}
	<span style="color:#000;font-weight:bold">return</span> ;	
}

<span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">main</span>(<span style="color:#458;font-weight:bold">void</span>)
{
	Elemtype e;
	
	SS<span style="color:#000;font-weight:bold">=</span>InitStack();
	printf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">请输入起点坐标：</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>);
	scanf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">%d%d</span><span style="color:#d14">&#34;</span>,<span style="color:#000;font-weight:bold">&amp;</span>e.x,<span style="color:#000;font-weight:bold">&amp;</span>e.y);
	
	<span style="color:#458;font-weight:bold">int</span> a<span style="color:#000;font-weight:bold">=</span>clock();
	dfs(e);
	<span style="color:#458;font-weight:bold">int</span> b<span style="color:#000;font-weight:bold">=</span>clock();
	printf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">\n</span><span style="color:#d14">%lf秒</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>,(b<span style="color:#000;font-weight:bold">-</span>a)<span style="color:#000;font-weight:bold">/</span><span style="color:#099">1000.0</span>);
}
 
</code></pre></td></tr></table>
</div>
</div><h4 id="3运行结果-1">3.运行结果</h4>
<p><img src="/image/Data_structure/22_2.png" alt="这里写图片描述"></p>
<h3 id="五马踏棋盘-子问题2">五.马踏棋盘 子问题2</h3>
<h4 id="1思路-3">1.思路</h4>
<blockquote>
<p>贪心算法：贪心算法（又称贪婪算法）是指，在对问题求解时，总是做出在当前看来是最好的选择</p>
</blockquote>
<ul>
<li>对于马踏棋盘问题而言，那个方向本次最优的，就是这个选择的可走的点（权值）少越好</li>
<li>计算权值时(Sortint函数)
<ul>
<li>e：马当前所在的位置</li>
<li>e1：马的八个方向</li>
<li>e2：e1可以走的方向。</li>
<li>e2数目的多少就是e1权值的大小</li>
<li>所以e应该走e1权值最小(但是非0)方向</li>
<li>b[8]里面存将8个方向的权值(元素结构体：方向+权值)排序后的结果。</li>
</ul>
</li>
<li>寻找路径时：(dfs函数)
<ul>
<li>不同于子问题一按照顺时针方向遍历，按照贪婪算法的思想，应该按照权值大小进行遍历</li>
<li>所以在遍历方向时，应该先计算e1(本次待入栈元素)八个方向的权值</li>
<li>e1入栈时机：b[k]的权值不为0，入栈后，标记，步数+1，k=0；e1更新，计算新e1的各个方向权值</li>
<li>出栈时机：b[k]==0,出栈后，出栈元素为e1，取消标记，步数-1，k接着入栈时的大小加一，计算新e1各个方向的权值</li>
</ul>
</li>
<li>循环的终止条件
<ul>
<li>如果此时马的步数==64，结束循环，输出路径</li>
</ul>
</li>
</ul>
<h4 id="2代码-2">2.代码</h4>
<p><strong>数据结构定义和预定义的数据</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#999;font-weight:bold;font-style:italic">#</span><span style="color:#999;font-weight:bold;font-style:italic">define MAXSIZE 100</span><span style="color:#999;font-weight:bold;font-style:italic">
</span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#999;font-weight:bold;font-style:italic">#</span><span style="color:#999;font-weight:bold;font-style:italic">define TRUE 1</span><span style="color:#999;font-weight:bold;font-style:italic">
</span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#999;font-weight:bold;font-style:italic">#</span><span style="color:#999;font-weight:bold;font-style:italic">define FALSE 0 </span><span style="color:#999;font-weight:bold;font-style:italic">
</span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#999;font-weight:bold;font-style:italic">#</span><span style="color:#999;font-weight:bold;font-style:italic">define W 8</span><span style="color:#999;font-weight:bold;font-style:italic">
</span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#999;font-weight:bold;font-style:italic">#</span><span style="color:#999;font-weight:bold;font-style:italic">define H 8</span><span style="color:#999;font-weight:bold;font-style:italic">
</span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#000;font-weight:bold">typedef</span> <span style="color:#000;font-weight:bold">struct</span>{ <span style="color:#998;font-style:italic">//栈内元素 
</span><span style="color:#998;font-style:italic"></span>	<span style="color:#458;font-weight:bold">int</span> x;
	<span style="color:#458;font-weight:bold">int</span> y;
	<span style="color:#458;font-weight:bold">int</span> direction;
} Elemtype;
<span style="color:#000;font-weight:bold">typedef</span> <span style="color:#000;font-weight:bold">struct</span> <span style="color:#998;font-style:italic">//栈 
</span><span style="color:#998;font-style:italic"></span>{
	Elemtype data[MAXSIZE];
	<span style="color:#458;font-weight:bold">int</span> top; 
}SeqStack; 

<span style="color:#000;font-weight:bold">typedef</span> <span style="color:#000;font-weight:bold">struct</span>{ <span style="color:#998;font-style:italic">//权值 
</span><span style="color:#998;font-style:italic"></span>	<span style="color:#458;font-weight:bold">int</span> value;
	<span style="color:#458;font-weight:bold">int</span> direction;
}Value;

SeqStack <span style="color:#000;font-weight:bold">*</span>SS;
<span style="color:#458;font-weight:bold">int</span> book[W][H] <span style="color:#000;font-weight:bold">=</span>{<span style="color:#099">0</span>};<span style="color:#998;font-style:italic">//标记
</span><span style="color:#998;font-style:italic"></span><span style="color:#458;font-weight:bold">int</span> next[<span style="color:#099">8</span>][<span style="color:#099">2</span>]<span style="color:#000;font-weight:bold">=</span>{{<span style="color:#000;font-weight:bold">-</span><span style="color:#099">2</span>,<span style="color:#099">1</span>}, <span style="color:#998;font-style:italic">//下一步走法 
</span><span style="color:#998;font-style:italic"></span>		{<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>,<span style="color:#099">2</span>}, 
		{<span style="color:#099">1</span>,<span style="color:#099">2</span>},
	        {<span style="color:#099">2</span>,<span style="color:#099">1</span>}, 
		{<span style="color:#099">2</span>,<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>},
		{<span style="color:#099">1</span>,<span style="color:#000;font-weight:bold">-</span><span style="color:#099">2</span>}, 
		{<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>,<span style="color:#000;font-weight:bold">-</span><span style="color:#099">2</span>},
	        {<span style="color:#000;font-weight:bold">-</span><span style="color:#099">2</span>,<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>}};
<span style="color:#458;font-weight:bold">int</span> step<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>;        
</code></pre></td></tr></table>
</div>
</div><p><strong>核心代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">97
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">Sortint</span>(Elemtype e , Value b[<span style="color:#099">8</span>]){ <span style="color:#998;font-style:italic">//计算e点8个方向的权值，并排序 
</span><span style="color:#998;font-style:italic"></span>	Elemtype e1,e2;
	<span style="color:#458;font-weight:bold">int</span> k1,k2;
	<span style="color:#000;font-weight:bold">for</span>(k1<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;k1<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">8</span>;k1<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>){
		e1.x <span style="color:#000;font-weight:bold">=</span> e.x<span style="color:#000;font-weight:bold">+</span>next[k1][<span style="color:#099">0</span>];
		e1.y <span style="color:#000;font-weight:bold">=</span> e.y<span style="color:#000;font-weight:bold">+</span>next[k1][<span style="color:#099">1</span>];
		
		b[k1].direction<span style="color:#000;font-weight:bold">=</span>k1;
		b[k1].value<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
		<span style="color:#000;font-weight:bold">if</span>(book[e1.x][e1.y]<span style="color:#000;font-weight:bold">!</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span><span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e1.x<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">0</span><span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e1.y<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">0</span><span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e1.x<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#000;font-weight:bold">=</span>H<span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e1.y<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#000;font-weight:bold">=</span>W)<span style="color:#998;font-style:italic">//如果这个点不能走，则跳过这个点
</span><span style="color:#998;font-style:italic"></span>			<span style="color:#000;font-weight:bold">continue</span>;
		
		<span style="color:#000;font-weight:bold">for</span>(k2<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;k2<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">8</span>;k2<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>){<span style="color:#998;font-style:italic">//计算这个点的权值 
</span><span style="color:#998;font-style:italic"></span>			e2.x<span style="color:#000;font-weight:bold">=</span> e1.x<span style="color:#000;font-weight:bold">+</span>next[k2][<span style="color:#099">0</span>];
			e2.y<span style="color:#000;font-weight:bold">=</span> e1.y<span style="color:#000;font-weight:bold">+</span>next[k2][<span style="color:#099">1</span>];
			<span style="color:#000;font-weight:bold">if</span>(book[e2.x][e2.y]<span style="color:#000;font-weight:bold">!</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span><span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span> e2.x<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">0</span> <span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e2.y<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">0</span> <span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e2.x<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#000;font-weight:bold">=</span>H <span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e2.y<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#000;font-weight:bold">=</span>W )
				<span style="color:#000;font-weight:bold">continue</span>;
			
			 b[k1].value<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>;<span style="color:#998;font-style:italic">//权值加一 
</span><span style="color:#998;font-style:italic"></span>		} 
	}
	<span style="color:#998;font-style:italic">//按权值大小排序(插入排序，0放末尾) 
</span><span style="color:#998;font-style:italic"></span>	<span style="color:#458;font-weight:bold">int</span> i,j;
	Value t;
	<span style="color:#000;font-weight:bold">for</span>(i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>;i<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">8</span>;i<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>){
		t<span style="color:#000;font-weight:bold">=</span>b[i];
		<span style="color:#000;font-weight:bold">for</span>(j<span style="color:#000;font-weight:bold">=</span>i<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>;j<span style="color:#000;font-weight:bold">!</span><span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span><span style="color:#000;font-weight:bold">&amp;</span><span style="color:#000;font-weight:bold">&amp;</span>(t.value<span style="color:#000;font-weight:bold">&lt;</span>b[j].value<span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>b[j].value<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>)<span style="color:#000;font-weight:bold">&amp;</span><span style="color:#000;font-weight:bold">&amp;</span>t.value<span style="color:#000;font-weight:bold">!</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;j<span style="color:#000;font-weight:bold">-</span><span style="color:#000;font-weight:bold">-</span>)
			b[j<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>]<span style="color:#000;font-weight:bold">=</span>b[j];
		b[j<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>]<span style="color:#000;font-weight:bold">=</span>t;
	
	}
	<span style="color:#000;font-weight:bold">return</span> ;
}
  
<span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">dfs</span>(Elemtype e){

	<span style="color:#458;font-weight:bold">int</span> k;
	Value b[<span style="color:#099">8</span>];<span style="color:#998;font-style:italic">//存放8个方向权值 
</span><span style="color:#998;font-style:italic"></span>	Elemtype e1<span style="color:#000;font-weight:bold">=</span>e,e2;<span style="color:#998;font-style:italic">//e1当前待入栈点，e2：e1试探方向的元素 
</span><span style="color:#998;font-style:italic"></span>	<span style="color:#458;font-weight:bold">int</span> i,j;
	
	Sortint(e1,b);<span style="color:#998;font-style:italic">//计算权值 
</span><span style="color:#998;font-style:italic"></span>	e1.direction<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
	<span style="color:#000;font-weight:bold">while</span>(step<span style="color:#000;font-weight:bold">!</span><span style="color:#000;font-weight:bold">=</span>W<span style="color:#000;font-weight:bold">*</span>H){
	
		Sortint(e1,b);<span style="color:#998;font-style:italic">//计算权值 
</span><span style="color:#998;font-style:italic"></span>		k<span style="color:#000;font-weight:bold">=</span>e1.direction;
				
		<span style="color:#000;font-weight:bold">if</span>(b[k].value<span style="color:#000;font-weight:bold">!</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>){
			e1.direction <span style="color:#000;font-weight:bold">=</span> k;<span style="color:#998;font-style:italic">//k为当前权值的下标 
</span><span style="color:#998;font-style:italic"></span>			
			<span style="color:#998;font-style:italic">//入栈 
</span><span style="color:#998;font-style:italic"></span>			Push(SS,e1); 
			book[e1.x][e1.y]<span style="color:#000;font-weight:bold">=</span>step;
			step<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>;
			 
			<span style="color:#998;font-style:italic">//更新e1 
</span><span style="color:#998;font-style:italic"></span>			e1.x <span style="color:#000;font-weight:bold">=</span> e1.x<span style="color:#000;font-weight:bold">+</span>next[b[k].direction][<span style="color:#099">0</span>];
			e1.y <span style="color:#000;font-weight:bold">=</span> e1.y<span style="color:#000;font-weight:bold">+</span>next[b[k].direction][<span style="color:#099">1</span>];
			e1.direction<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>; 
		}
		<span style="color:#000;font-weight:bold">if</span>(b[k].value<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span><span style="color:#000;font-weight:bold">&amp;</span><span style="color:#000;font-weight:bold">&amp;</span>step<span style="color:#000;font-weight:bold">!</span><span style="color:#000;font-weight:bold">=</span>W<span style="color:#000;font-weight:bold">*</span>H){
			<span style="color:#998;font-style:italic">//出栈 并更新e1 
</span><span style="color:#998;font-style:italic"></span>			Pop(SS,<span style="color:#000;font-weight:bold">&amp;</span>e1); 
			book[e1.x][e1.y]<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>; 
			step<span style="color:#000;font-weight:bold">-</span><span style="color:#000;font-weight:bold">-</span>;
			e1.direction<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>;<span style="color:#998;font-style:italic">//下次试探接着入栈键的方向 
</span><span style="color:#998;font-style:italic"></span>		}
		
	}
	
	<span style="color:#998;font-style:italic">//标记将终点元素入栈 
</span><span style="color:#998;font-style:italic"></span>	book[e1.x][e1.y]<span style="color:#000;font-weight:bold">=</span>step;
	
	<span style="color:#000;font-weight:bold">if</span>(step<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span>W<span style="color:#000;font-weight:bold">*</span>H){         <span style="color:#998;font-style:italic">//打印 
</span><span style="color:#998;font-style:italic"></span>		<span style="color:#000;font-weight:bold">for</span>(i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;i<span style="color:#000;font-weight:bold">&lt;</span>H;i<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>){ 
			<span style="color:#000;font-weight:bold">for</span>(j<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;j<span style="color:#000;font-weight:bold">&lt;</span>W;j<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>)
				printf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">%4d</span><span style="color:#d14">&#34;</span>,book[i][j]);
		 	printf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>);
		} 
	}
		
}

<span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">main</span>(<span style="color:#458;font-weight:bold">void</span>)
{
	Elemtype e;
	SS<span style="color:#000;font-weight:bold">=</span>InitStack();
	printf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">请输入起点坐标：</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>);
	scanf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">%d%d</span><span style="color:#d14">&#34;</span>,<span style="color:#000;font-weight:bold">&amp;</span>e.x,<span style="color:#000;font-weight:bold">&amp;</span>e.y);
	book[e.x][e.y]<span style="color:#000;font-weight:bold">=</span>step;<span style="color:#998;font-style:italic">//标记起始点
</span><span style="color:#998;font-style:italic"></span>	
	<span style="color:#458;font-weight:bold">int</span> a<span style="color:#000;font-weight:bold">=</span>clock();
	dfs(e);
	<span style="color:#458;font-weight:bold">int</span> b<span style="color:#000;font-weight:bold">=</span>clock();
	printf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">\n</span><span style="color:#d14">%lf秒</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>,(b<span style="color:#000;font-weight:bold">-</span>a)<span style="color:#000;font-weight:bold">/</span><span style="color:#099">1000.0</span>);
}
</code></pre></td></tr></table>
</div>
</div><h4 id="3运行结果-2">3.运行结果</h4>
<p><img src="/image/Data_structure/22_3.png" alt="这里写图片描述"></p>
<h3 id="六马踏棋盘-子问题3">六.马踏棋盘 子问题3</h3>
<h4 id="1思路-4">1.思路</h4>
<ul>
<li>思路和马踏1棋盘子问题一类似</li>
<li>区别在于：
<ul>
<li>终止条件变为栈为空</li>
<li>步数变为64时，先标记，打印，取消标记，出栈。</li>
</ul>
</li>
</ul>
<h4 id="2代码-3">2.代码</h4>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">dfs</span>(Elemtype e){

	 <span style="color:#458;font-weight:bold">int</span> k,step<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>;
	 <span style="color:#458;font-weight:bold">int</span> i,j;
	 Elemtype e1<span style="color:#000;font-weight:bold">=</span>e,e2;
	 e1.direction<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
	 <span style="color:#000;font-weight:bold">do</span>{
			
		<span style="color:#000;font-weight:bold">for</span>(k<span style="color:#000;font-weight:bold">=</span>e1.direction;k<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">8</span>;k<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>){
			
			e2.x<span style="color:#000;font-weight:bold">=</span>e1.x<span style="color:#000;font-weight:bold">+</span>next[k][<span style="color:#099">0</span>];
			e2.y<span style="color:#000;font-weight:bold">=</span>e1.y<span style="color:#000;font-weight:bold">+</span>next[k][<span style="color:#099">1</span>];
			e1.direction <span style="color:#000;font-weight:bold">=</span> k; 
			
			<span style="color:#000;font-weight:bold">if</span>(e2.x<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">0</span><span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e2.x<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#000;font-weight:bold">=</span>W<span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e2.y<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">0</span><span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e2.y<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#000;font-weight:bold">=</span>H)
				<span style="color:#000;font-weight:bold">continue</span>;
		
			<span style="color:#000;font-weight:bold">if</span>(book[e2.x][e2.y]<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>){
				book[e1.x][e1.y]<span style="color:#000;font-weight:bold">=</span>step;<span style="color:#998;font-style:italic">//标记
</span><span style="color:#998;font-style:italic"></span>				Push(SS,e1);
				<span style="color:#998;font-style:italic">//printf(&#34;入(%d,%d)%d %d\n&#34;,e1.x,e1.y,e1.direction,SS-&gt;top);
</span><span style="color:#998;font-style:italic"></span>				e1 <span style="color:#000;font-weight:bold">=</span> e2;
				e1.direction<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
				step<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>;
				<span style="color:#000;font-weight:bold">break</span>;
			}
		}	
		
		<span style="color:#000;font-weight:bold">if</span>(step<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span>H<span style="color:#000;font-weight:bold">*</span>W){<span style="color:#998;font-style:italic">//打印 
</span><span style="color:#998;font-style:italic"></span>		
			book[e1.x][e1.y]<span style="color:#000;font-weight:bold">=</span>step;
			<span style="color:#000;font-weight:bold">for</span>(i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;i<span style="color:#000;font-weight:bold">&lt;</span>H;i<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>){ 
				<span style="color:#000;font-weight:bold">for</span>(j<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;j<span style="color:#000;font-weight:bold">&lt;</span>W;j<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>)
					printf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">%4d</span><span style="color:#d14">&#34;</span>,book[i][j]);
			 	printf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>);
			} 
			t<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>;
			printf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">第%d种走法</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>,t);
			book[e1.x][e1.y]<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
			
		}
		<span style="color:#000;font-weight:bold">if</span>(k<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">8</span><span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>step<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span>H<span style="color:#000;font-weight:bold">*</span>W){ 
			Pop(SS,<span style="color:#000;font-weight:bold">&amp;</span>e1);	
			<span style="color:#998;font-style:italic">//printf(&#34;出(%d,%d)%d %d\n&#34;,e1.x,e1.y,e1.direction,SS-&gt;top);
</span><span style="color:#998;font-style:italic"></span>		 	book[e1.x][e1.y]<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
			step<span style="color:#000;font-weight:bold">-</span><span style="color:#000;font-weight:bold">-</span>;
			e1.direction<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>;
		}	
			
	}<span style="color:#000;font-weight:bold">while</span>(<span style="color:#000;font-weight:bold">!</span>StackEmpty(SS)<span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e1.direction<span style="color:#000;font-weight:bold">!</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">8</span>); 
		
	<span style="color:#000;font-weight:bold">return</span> ;	
}

<span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">main</span>(<span style="color:#458;font-weight:bold">void</span>)
{
	Elemtype e;
	SS<span style="color:#000;font-weight:bold">=</span>InitStack();
	e.x<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
	e.y<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
	book[<span style="color:#099">0</span>][<span style="color:#099">0</span>]<span style="color:#000;font-weight:bold">=</span>step;<span style="color:#998;font-style:italic">//标记起始点
</span><span style="color:#998;font-style:italic"></span>	<span style="color:#458;font-weight:bold">int</span> a<span style="color:#000;font-weight:bold">=</span>clock();
	dfs(e);
	<span style="color:#458;font-weight:bold">int</span> b<span style="color:#000;font-weight:bold">=</span>clock();
	printf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">\n</span><span style="color:#d14">%lf秒</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>,(b<span style="color:#000;font-weight:bold">-</span>a)<span style="color:#000;font-weight:bold">/</span><span style="color:#099">1000.0</span>);
}
</code></pre></td></tr></table>
</div>
</div><h4 id="3运行结果-3">3.运行结果</h4>
<p><img src="/image/Data_structure/22_4.png" alt="这里写图片描述"></p>
<h3 id="七马踏棋盘-子问题4">七.马踏棋盘 子问题4</h3>
<h4 id="1思路-5">1.思路</h4>
<ul>
<li>思路和马踏1棋盘子问题一类似</li>
<li>区别在于：
<ul>
<li>终止条件变为当前方法数等于目标方法数</li>
<li>步数变为64时，先标记，打印，取消标记，出栈。</li>
<li>输出指定多方法中，Q代表的只遍历权值排名前Q的方向(提高速度)。所以，输出的结果可能不会输出全部的走法。如果要改成输出全部走法，把Q改为8.</li>
</ul>
</li>
</ul>
<h4 id="2代码-4">2.代码</h4>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">Sortint</span>(Elemtype e , Value b[<span style="color:#099">8</span>]){ <span style="color:#998;font-style:italic">//计算e点8个方向的权值，并排序 
</span><span style="color:#998;font-style:italic"></span>	Elemtype e1,e2;
	<span style="color:#458;font-weight:bold">int</span> k1,k2;
	<span style="color:#000;font-weight:bold">for</span>(k1<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;k1<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">8</span>;k1<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>){
		e1.x <span style="color:#000;font-weight:bold">=</span> e.x<span style="color:#000;font-weight:bold">+</span>next[k1][<span style="color:#099">0</span>];
		e1.y <span style="color:#000;font-weight:bold">=</span> e.y<span style="color:#000;font-weight:bold">+</span>next[k1][<span style="color:#099">1</span>];
		
		b[k1].direction<span style="color:#000;font-weight:bold">=</span>k1;
		b[k1].value<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
		<span style="color:#000;font-weight:bold">if</span>(book[e1.x][e1.y]<span style="color:#000;font-weight:bold">!</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span><span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e1.x<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">0</span><span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e1.y<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">0</span><span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e1.x<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#000;font-weight:bold">=</span>H<span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e1.y<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#000;font-weight:bold">=</span>W)<span style="color:#998;font-style:italic">//如果这个点不能走，则跳过这个点
</span><span style="color:#998;font-style:italic"></span>			<span style="color:#000;font-weight:bold">continue</span>;
		
		<span style="color:#000;font-weight:bold">for</span>(k2<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;k2<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">8</span>;k2<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>){<span style="color:#998;font-style:italic">//计算这个点的权值 
</span><span style="color:#998;font-style:italic"></span>			e2.x<span style="color:#000;font-weight:bold">=</span> e1.x<span style="color:#000;font-weight:bold">+</span>next[k2][<span style="color:#099">0</span>];
			e2.y<span style="color:#000;font-weight:bold">=</span> e1.y<span style="color:#000;font-weight:bold">+</span>next[k2][<span style="color:#099">1</span>];
			<span style="color:#000;font-weight:bold">if</span>(book[e2.x][e2.y]<span style="color:#000;font-weight:bold">!</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span><span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span> e2.x<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">0</span> <span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e2.y<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">0</span> <span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e2.x<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#000;font-weight:bold">=</span>H <span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>e2.y<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#000;font-weight:bold">=</span>W )
				<span style="color:#000;font-weight:bold">continue</span>;
			
			 b[k1].value<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>;<span style="color:#998;font-style:italic">//权值加一 
</span><span style="color:#998;font-style:italic"></span>		} 
	}
	<span style="color:#998;font-style:italic">//按权值大小排序(插入排序，0放末尾) 
</span><span style="color:#998;font-style:italic"></span>	<span style="color:#458;font-weight:bold">int</span> i,j;
	Value t;
	<span style="color:#000;font-weight:bold">for</span>(i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>;i<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">8</span>;i<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>){
		t<span style="color:#000;font-weight:bold">=</span>b[i];
		<span style="color:#000;font-weight:bold">for</span>(j<span style="color:#000;font-weight:bold">=</span>i<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>;j<span style="color:#000;font-weight:bold">!</span><span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span><span style="color:#000;font-weight:bold">&amp;</span><span style="color:#000;font-weight:bold">&amp;</span>(t.value<span style="color:#000;font-weight:bold">&lt;</span>b[j].value<span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>b[j].value<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>)<span style="color:#000;font-weight:bold">&amp;</span><span style="color:#000;font-weight:bold">&amp;</span>t.value<span style="color:#000;font-weight:bold">!</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;j<span style="color:#000;font-weight:bold">-</span><span style="color:#000;font-weight:bold">-</span>)
			b[j<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>]<span style="color:#000;font-weight:bold">=</span>b[j];
		b[j<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>]<span style="color:#000;font-weight:bold">=</span>t;
	
	}
	<span style="color:#000;font-weight:bold">return</span> ;
}
  
<span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">dfs</span>(Elemtype e){

	<span style="color:#458;font-weight:bold">int</span> k;
	Value b[<span style="color:#099">8</span>];<span style="color:#998;font-style:italic">//存放8个方向权值 
</span><span style="color:#998;font-style:italic"></span>	Elemtype e1<span style="color:#000;font-weight:bold">=</span>e,e2;<span style="color:#998;font-style:italic">//e1当前待入栈点，e2：e1试探方向的元素 
</span><span style="color:#998;font-style:italic"></span>	<span style="color:#458;font-weight:bold">int</span> i,j;
	
	Sortint(e1,b);<span style="color:#998;font-style:italic">//计算权值 
</span><span style="color:#998;font-style:italic"></span>	e1.direction<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
	<span style="color:#000;font-weight:bold">do</span>{
	
		Sortint(e1,b);<span style="color:#998;font-style:italic">//计算权值 
</span><span style="color:#998;font-style:italic"></span>		k<span style="color:#000;font-weight:bold">=</span>e1.direction;
				
		<span style="color:#000;font-weight:bold">if</span>(b[k].value<span style="color:#000;font-weight:bold">!</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span><span style="color:#000;font-weight:bold">&amp;</span><span style="color:#000;font-weight:bold">&amp;</span>k<span style="color:#000;font-weight:bold">&lt;</span>Q){   <span style="color:#998;font-style:italic">//只遍历权值排名前Q的方向 
</span><span style="color:#998;font-style:italic"></span>			e1.direction <span style="color:#000;font-weight:bold">=</span> k;<span style="color:#998;font-style:italic">//k为当前权值的下标 
</span><span style="color:#998;font-style:italic"></span>			
			<span style="color:#998;font-style:italic">//入栈 
</span><span style="color:#998;font-style:italic"></span>			Push(SS,e1); 
			book[e1.x][e1.y]<span style="color:#000;font-weight:bold">=</span>step;
			step<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>;
			 <span style="color:#998;font-style:italic">//printf(&#34;入(%d,%d)%d %d\n&#34;,e1.x,e1.y,e1.direction,SS-&gt;top);
</span><span style="color:#998;font-style:italic"></span>			<span style="color:#998;font-style:italic">//更新e1 
</span><span style="color:#998;font-style:italic"></span>			e1.x <span style="color:#000;font-weight:bold">=</span> e1.x<span style="color:#000;font-weight:bold">+</span>next[b[k].direction][<span style="color:#099">0</span>];
			e1.y <span style="color:#000;font-weight:bold">=</span> e1.y<span style="color:#000;font-weight:bold">+</span>next[b[k].direction][<span style="color:#099">1</span>];
			e1.direction<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>; 
		}
		
		<span style="color:#000;font-weight:bold">if</span>(step<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span>W<span style="color:#000;font-weight:bold">*</span>H){  
			t<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>; 
			book[e1.x][e1.y]<span style="color:#000;font-weight:bold">=</span>step;	
	     	 <span style="color:#998;font-style:italic">//打印 
</span><span style="color:#998;font-style:italic"></span>			<span style="color:#000;font-weight:bold">for</span>(i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;i<span style="color:#000;font-weight:bold">&lt;</span>H;i<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>){ 
				<span style="color:#000;font-weight:bold">for</span>(j<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;j<span style="color:#000;font-weight:bold">&lt;</span>W;j<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>)
					printf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">%4d</span><span style="color:#d14">&#34;</span>,book[i][j]);
		 		printf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>);
			} 
			printf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">第%d种走法</span><span style="color:#d14">\n</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>,t); 
			book[e1.x][e1.y]<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;	 
		}
		<span style="color:#000;font-weight:bold">if</span>(b[k].value<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span><span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>step<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">=</span>W<span style="color:#000;font-weight:bold">*</span>H<span style="color:#000;font-weight:bold">|</span><span style="color:#000;font-weight:bold">|</span>k<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#000;font-weight:bold">=</span>Q){
			<span style="color:#998;font-style:italic">//出栈 并更新e1 
</span><span style="color:#998;font-style:italic"></span>			Pop(SS,<span style="color:#000;font-weight:bold">&amp;</span>e1);
			<span style="color:#998;font-style:italic">//printf(&#34;出(%d,%d)%d %d\n&#34;,e1.x,e1.y,e1.direction,SS-&gt;top); 
</span><span style="color:#998;font-style:italic"></span>			book[e1.x][e1.y]<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>; 
			step<span style="color:#000;font-weight:bold">-</span><span style="color:#000;font-weight:bold">-</span>;
			e1.direction<span style="color:#000;font-weight:bold">+</span><span style="color:#000;font-weight:bold">+</span>;<span style="color:#998;font-style:italic">//下次试探接着入栈键的方向 
</span><span style="color:#998;font-style:italic"></span>		}
	}<span style="color:#000;font-weight:bold">while</span>(count<span style="color:#000;font-weight:bold">!</span><span style="color:#000;font-weight:bold">=</span> t);  
}

<span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">main</span>(<span style="color:#458;font-weight:bold">void</span>)
{
	Elemtype e;
	SS<span style="color:#000;font-weight:bold">=</span>InitStack();
	printf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">请输入起点坐标：</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>);
	scanf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">%d%d</span><span style="color:#d14">&#34;</span>,<span style="color:#000;font-weight:bold">&amp;</span>e.x,<span style="color:#000;font-weight:bold">&amp;</span>e.y);
	book[e.x][e.y]<span style="color:#000;font-weight:bold">=</span>step;<span style="color:#998;font-style:italic">//标记起始点
</span><span style="color:#998;font-style:italic"></span>	printf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">要计算多少种走法:</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>);
	scanf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">%d</span><span style="color:#d14">&#34;</span>,<span style="color:#000;font-weight:bold">&amp;</span>count);
	<span style="color:#458;font-weight:bold">int</span> a<span style="color:#000;font-weight:bold">=</span>clock();
	dfs(e);
	<span style="color:#458;font-weight:bold">int</span> b<span style="color:#000;font-weight:bold">=</span>clock();
	printf(<span style="color:#d14"></span><span style="color:#d14">&#34;</span><span style="color:#d14">\n</span><span style="color:#d14">%lf秒</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>,(b<span style="color:#000;font-weight:bold">-</span>a)<span style="color:#000;font-weight:bold">/</span><span style="color:#099">1000.0</span>);
	getchar();
}
 
	            
</code></pre></td></tr></table>
</div>
</div><h4 id="3运行结果-4">3.运行结果</h4>
<p><img src="/image/Data_structure/22_5.png" alt="这里写图片描述"></p>
<h3 id="八对比递归非递归贪心优化三种算法运行时间">八.对比递归，非递归，贪心优化三种算法运行时间</h3>
<p><img src="/image/Data_structure/22_6.png" alt="这里写图片描述"></p>
<h3 id="九源代码">九.源代码</h3>
<p><a href="https://github.com/hsc396612325/Blog">tast5</a></p>

        </div>

        
<div class="post-archive">
    <ul class="post-copyright">
        <li><strong>原文作者：</strong><a rel="author" href="http://blog.bingtan.online">冰炭不投day</a></li>
        <li style="word-break:break-all"><strong>原文链接：</strong><a href="http://blog.bingtan.online/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%848%E6%A0%88%E7%9A%84%E5%BA%94%E7%94%A82-%E9%9D%9E%E9%80%92%E5%BD%92%E8%A7%A3%E5%86%B3%E8%BF%B7%E5%AE%AB%E5%92%8C%E9%A9%AC%E8%B8%8F%E6%A3%8B%E7%9B%98%E9%97%AE%E9%A2%98/">http://blog.bingtan.online/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%848%E6%A0%88%E7%9A%84%E5%BA%94%E7%94%A82-%E9%9D%9E%E9%80%92%E5%BD%92%E8%A7%A3%E5%86%B3%E8%BF%B7%E5%AE%AB%E5%92%8C%E9%A9%AC%E8%B8%8F%E6%A3%8B%E7%9B%98%E9%97%AE%E9%A2%98/</a></li>
        <li><strong>版权声明：</strong>本作品采用<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可，非商业转载请注明出处（作者，原文链接），商业转载请联系作者获得授权。</li>
    </ul>
</div>
<br/>



        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%847%E9%80%92%E5%BD%92%E8%A7%A3%E5%86%B3%E8%BF%B7%E5%AE%AB%E9%97%AE%E9%A2%98%E5%92%8C%E9%A9%AC%E8%B8%8F%E6%A3%8B%E7%9B%98/">数据结构7————递归解决迷宫问题和马踏棋盘</a></li>
        
        <li><a href="/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%846%E9%98%9F%E6%A0%88%E7%9A%84%E5%BA%94%E7%94%A81/">数据结构6————队栈的应用1</a></li>
        
        <li><a href="/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%845%E9%98%9F%E7%9A%84%E6%A6%82%E5%BF%B5%E5%92%8C%E8%BF%90%E7%AE%97/">数据结构5————队的概念和运算</a></li>
        
        <li><a href="/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%844%E6%A0%88%E7%9A%84%E6%A6%82%E5%BF%B5%E5%92%8C%E8%BF%90%E7%AE%97/">数据结构4————栈的概念和运算</a></li>
        
        <li><a href="/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%843%E9%93%BE%E8%A1%A8%E7%9A%84%E5%BA%94%E7%94%A82%E4%B8%80%E5%85%83%E5%A4%9A%E9%A1%B9%E5%BC%8F/">数据结构3————链表的应用2[一元多项式]</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='http://blog.bingtan.online/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84'>数据结构</a></li>
                
            </ul>
            
        </div>
    </article>
    
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "yourdiscussshortname" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "https://github.com/hsc396612325/HSCBlog/tree/gh-pages"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    
</div>

                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='http://blog.bingtan.online/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="http://blog.bingtan.online">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>

    
    <section class="widget">
        <h3 class="widget-title">文章目录</h3>
<ul class="widget-list">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#一前言">一.前言</a>
      <ul>
        <li><a href="#1-迷宫问题的描述">1. 迷宫问题的描述</a></li>
        <li><a href="#2-马踏棋盘问题的描述">2. 马踏棋盘问题的描述</a></li>
        <li><a href="#3使用的算法">3.使用的算法</a></li>
        <li><a href="#4其他">4.其他</a></li>
      </ul>
    </li>
    <li><a href="#二迷宫-子问题1">二.迷宫 子问题1</a>
      <ul>
        <li><a href="#1思路">1.思路</a></li>
        <li><a href="#2难点">2.难点</a></li>
        <li><a href="#3代码">3.代码</a></li>
        <li><a href="#4运行结果">4.运行结果</a></li>
      </ul>
    </li>
    <li><a href="#三迷宫-子问题2">三.迷宫 子问题2</a>
      <ul>
        <li><a href="#1思路-1">1.思路</a></li>
        <li><a href="#2代码">2.代码</a></li>
        <li><a href="#3运行结果">3.运行结果</a></li>
      </ul>
    </li>
    <li><a href="#四马踏棋盘-子问题1">四.马踏棋盘 子问题1</a>
      <ul>
        <li><a href="#1思路-2">1.思路</a></li>
        <li><a href="#2代码-1">2.代码</a></li>
        <li><a href="#3运行结果-1">3.运行结果</a></li>
      </ul>
    </li>
    <li><a href="#五马踏棋盘-子问题2">五.马踏棋盘 子问题2</a>
      <ul>
        <li><a href="#1思路-3">1.思路</a></li>
        <li><a href="#2代码-2">2.代码</a></li>
        <li><a href="#3运行结果-2">3.运行结果</a></li>
      </ul>
    </li>
    <li><a href="#六马踏棋盘-子问题3">六.马踏棋盘 子问题3</a>
      <ul>
        <li><a href="#1思路-4">1.思路</a></li>
        <li><a href="#2代码-3">2.代码</a></li>
        <li><a href="#3运行结果-3">3.运行结果</a></li>
      </ul>
    </li>
    <li><a href="#七马踏棋盘-子问题4">七.马踏棋盘 子问题4</a>
      <ul>
        <li><a href="#1思路-5">1.思路</a></li>
        <li><a href="#2代码-4">2.代码</a></li>
        <li><a href="#3运行结果-4">3.运行结果</a></li>
      </ul>
    </li>
    <li><a href="#八对比递归非递归贪心优化三种算法运行时间">八.对比递归，非递归，贪心优化三种算法运行时间</a></li>
    <li><a href="#九源代码">九.源代码</a></li>
  </ul>
</nav>
</ul>
    </section>
    

    

    

    
   
    

    

    
    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="http://blog.bingtan.online/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
    <footer id="footer">
    <div class="container">
        &copy; 2020 <a href="http://blog.bingtan.online">冰炭不投day的博客 By 冰炭不投day</a>.
        Powered by <a rel="nofollow noreferer noopener" href="https://gohugo.io" target="_blank">Hugo</a>.
        <a href="https://www.flysnow.org/" target="_blank">Theme</a> based on <a href="https://github.com/flysnow-org/maupassant-hugo" target="_blank">maupassant</a>.
        
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>


<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




    <script src='/js/douban.js'></script>

</body>

</html>